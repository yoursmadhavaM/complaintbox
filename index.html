<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>College Complaint Submission</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="logo-styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Fixed College Banner -->
    <div class="college-banner">
        <img src="https://image2url.com/images/1756274440672-9059ea59-82f6-4890-8342-990e01fee35e.png" alt="RVR & JC College of Engineering Banner" class="banner-image">
    </div>

    <!-- Fixed Announcement Bar -->
    <div id="announcementBar" class="announcement-bar"></div>

    <!-- Welcome Modal (kept for structure, hidden; actions moved to Quick Actions) -->
    <div id="authModal" class="modal-overlay" style="display:none;"></div>

    <!-- Quick Actions: horizontal buttons below announcement bar -->
    <div class="quick-actions" style="position:relative; z-index:1; max-width:900px; width:90%; margin: 20px auto 0 auto; display:flex; gap:30px; flex-wrap:wrap; justify-content:center; align-items:flex-start; min-height: calc(100vh - 220px);">
        <!-- Login/Register Section -->
        <div class="action-item" style="display:flex; flex-direction:column; align-items:center; text-align:center; min-width:120px;">
            <div class="action-logo" style="width:80px; height:80px; background:#1976d2; border-radius:50%; display:flex; align-items:center; justify-content:center; margin-bottom:12px; box-shadow:0 4px 12px rgba(25,118,210,0.25);">
                <i class="fa-solid fa-right-to-bracket" style="font-size:2rem; color:#fff;"></i>
            </div>
            <button id="loginBtn" style="border:none; border-radius:10px; padding:12px 18px; font-weight:700; font-size:0.95rem; cursor:pointer; color:#fff; background:#1976d2; box-shadow:0 4px 12px rgba(25,118,210,0.25); white-space:nowrap; width:100%;">
                Login / Register
            </button>
        </div>

        <!-- Anonymous Submit Section -->
        <div class="action-item" style="display:flex; flex-direction:column; align-items:center; text-align:center; min-width:120px;">
            <div class="action-logo" style="width:80px; height:80px; background:#6d28d9; border-radius:50%; display:flex; align-items:center; justify-content:center; margin-bottom:12px; box-shadow:0 4px 12px rgba(109,40,217,0.25);">
                <i class="fa-solid fa-user-secret" style="font-size:2rem; color:#fff;"></i>
            </div>
            <button id="anonymousBtn" style="border:none; border-radius:10px; padding:12px 18px; font-weight:700; font-size:0.95rem; cursor:pointer; color:#fff; background:#6d28d9; box-shadow:0 4px 12px rgba(109,40,217,0.25); white-space:nowrap; width:100%;">
                Submit Anonymously
            </button>
        </div>

        <!-- Submit Complaint Section -->
        <div class="action-item" style="display:flex; flex-direction:column; align-items:center; text-align:center; min-width:120px;">
            <div class="action-logo" style="width:80px; height:80px; background:#16a34a; border-radius:50%; display:flex; align-items:center; justify-content:center; margin-bottom:12px; box-shadow:0 4px 12px rgba(22,163,74,0.25);">
                <i class="fa-solid fa-file-lines" style="font-size:2rem; color:#fff;"></i>
            </div>
            <button id="submitComplaintBtn" style="border:none; border-radius:10px; padding:12px 18px; font-weight:700; font-size:0.95rem; cursor:pointer; color:#fff; background:#16a34a; box-shadow:0 4px 12px rgba(22,163,74,0.25); white-space:nowrap; width:100%;">
                Submit a Complaint
            </button>
        </div>

        <!-- Check Status Section -->
        <div class="action-item" style="display:flex; flex-direction:column; align-items:center; text-align:center; min-width:120px;">
            <div class="action-logo" style="width:80px; height:80px; background:#f59e0b; border-radius:50%; display:flex; align-items:center; justify-content:center; margin-bottom:12px; box-shadow:0 4px 12px rgba(245,158,11,0.25);">
                <i class="fa-solid fa-magnifying-glass" style="font-size:2rem; color:#fff;"></i>
            </div>
            <button id="checkStatusBtn" style="border:none; border-radius:10px; padding:12px 18px; font-weight:700; font-size:0.95rem; cursor:pointer; color:#fff; background:#f59e0b; box-shadow:0 4px 12px rgba(245,158,11,0.25); white-space:nowrap; width:100%;">
                Check Status
            </button>
        </div>

        <!-- Admin Login Section -->
        <div class="action-item" style="display:flex; flex-direction:column; align-items:center; text-align:center; min-width:120px;">
            <div class="action-logo" style="width:80px; height:80px; background:#ef4444; border-radius:50%; display:flex; align-items:center; justify-content:center; margin-bottom:12px; box-shadow:0 4px 12px rgba(239,68,68,0.25);">
                <i class="fa-solid fa-user-shield" style="font-size:2rem; color:#fff;"></i>
            </div>
            <button id="adminLoginBtn" style="border:none; border-radius:10px; padding:12px 18px; font-weight:700; font-size:0.95rem; cursor:pointer; color:#fff; background:#ef4444; box-shadow:0 4px 12px rgba(239,68,68,0.25); white-space:nowrap; width:100%;">
                Admin Login
            </button>
        </div>

        <!-- Bounce Token Section -->
        <div class="action-item" style="display:flex; flex-direction:column; align-items:center; text-align:center; min-width:120px;">
            <div class="action-logo" style="width:80px; height:80px; background:#e91e63; border-radius:50%; display:flex; align-items:center; justify-content:center; margin-bottom:12px; box-shadow:0 4px 12px rgba(233,30,99,0.25);">
                <i class="fa-solid fa-undo" style="font-size:2rem; color:#fff;"></i>
            </div>
            <button onclick="window.location.href='status.html'" style="border:none; border-radius:10px; padding:12px 18px; font-weight:700; font-size:0.95rem; cursor:pointer; color:#fff; background:#e91e63; box-shadow:0 4px 12px rgba(233,30,99,0.25); white-space:nowrap; width:100%;">
                Bounce the Token
            </button>
        </div>
    </div>

    <!-- Important Note Section -->
    <div class="important-note" style="max-width:1100px; width:90%; margin: 40px auto; padding: 30px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); color: white; text-align: center;">
        <h2 style="margin: 0 0 20px 0; font-size: 1.8rem; color: #fff; text-shadow: 0 2px 4px rgba(0,0,0,0.3);">
            <i class="fa-solid fa-lightbulb" style="margin-right: 10px;"></i>
            Have Valid Proof for Your Complaint?
        </h2>
        <p style="font-size: 1.1rem; margin: 0 0 25px 0; line-height: 1.6;">
            If you have valid proof for any complaint, you can send us an email to get a fair resolution. 
            Please follow these mandatory rules:
        </p>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 25px;">
            <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 10px; backdrop-filter: blur(10px);">
                <div style="font-size: 2rem; margin-bottom: 10px; color: #ffd700;">
                    <i class="fa-solid fa-1"></i>
                </div>
                <h3 style="margin: 0 0 10px 0; font-size: 1.2rem;">Register Complaint First</h3>
                <p style="margin: 0; font-size: 0.95rem;">You must already register the complaint on this page</p>
            </div>
            <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 10px; backdrop-filter: blur(10px);">
                <div style="font-size: 2rem; margin-bottom: 10px; color: #ffd700;">
                    <i class="fa-solid fa-2"></i>
                </div>
                <h3 style="margin: 0 0 10px 0; font-size: 1.2rem;">Token ID Required</h3>
                <p style="margin: 0; font-size: 0.95rem;">Token ID is mandatory for proof submission</p>
            </div>
            <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 10px; backdrop-filter: blur(10px);">
                <div style="font-size: 2rem; margin-bottom: 10px; color: #ffd700;">
                    <i class="fa-solid fa-3"></i>
                </div>
                <h3 style="margin: 0 0 10px 0; font-size: 1.2rem;">Email Subject</h3>
                <p style="margin: 0; font-size: 0.95rem;">Add the token ID as the email subject</p>
            </div>
            <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 10px; backdrop-filter: blur(10px);">
                <div style="font-size: 2rem; margin-bottom: 10px; color: #ffd700;">
                    <i class="fa-solid fa-4"></i>
                </div>
                <h3 style="margin: 0 0 10px 0; font-size: 1.2rem;">Proof Required</h3>
                <p style="margin: 0; font-size: 0.95rem;">Include at least 1 proof with your email</p>
            </div>
        </div>
        <div style="margin-top: 30px; padding: 20px; background: rgba(255,255,255,0.15); border-radius: 10px;">
            <p style="margin: 0; font-size: 1.1rem; font-weight: 600;">
                <i class="fa-solid fa-envelope" style="margin-right: 8px;"></i>
                Send your proof to: <strong>complaints@rvrjcce.edu.in</strong>
            </p>
        </div>
    </div>

    <!-- Inline Status Check Modal -->
    <div id="statusModal" class="modal-overlay" style="display:none;">
        <div class="modal-content">
            <button id="closeStatusModalBtn" style="float:right; background:none; border:none; font-size:1.5rem; color:#4f8cff; cursor:pointer;" aria-label="Close">&times;</button>
            <h2>Check Complaint Status</h2>
            <form id="inlineStatusForm">
                <label for="inlineToken">Enter Your Complaint Token:</label>
                <input type="text" id="inlineToken" name="inlineToken" required>
                <button type="submit">Check Status</button>
            </form>
            <div id="inlineStatusResult"></div>
        </div>
    </div>

    <!-- Request Announcement Button -->
    <button id="requestAnnouncementBtn" class="request-announcement-btn" style="display:none;">Request Announcement</button>

    <!-- Login Required Modal for Announcement Request -->
    <div id="loginRequiredModal" class="modal-overlay" style="display:none;">
        <div class="modal-content">
            <button id="closeLoginRequiredModalBtn" style="float:right; background:none; border:none; font-size:1.5rem; color:#e53935; cursor:pointer;" aria-label="Close">&times;</button>
            <h2>Login Required</h2>
            <p>You need to be logged in to request announcements.</p>
            <div style="margin-top:20px;">
                <button id="goToLoginBtn" style="background:#4f8cff;color:#fff;border:none;border-radius:6px;padding:10px 20px;font-weight:600;margin-right:10px;">Login</button>
                <button id="cancelLoginRequiredBtn" style="background:#6c757d;color:#fff;border:none;border-radius:6px;padding:10px 20px;font-weight:600;">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Announcement Request Modal -->
    <div id="announcementModal" class="modal-overlay" style="display:none;">
        <div class="modal-content">
            <button id="closeAnnouncementModalBtn" style="float:right; background:none; border:none; font-size:1.5rem; color:#e53935; cursor:pointer;" aria-label="Close">&times;</button>
            <h2>Request Announcement</h2>
            <form id="announcementRequestForm">
                <label for="announcementText">Announcement Text:</label>
                <textarea id="announcementText" name="announcementText" rows="3" required placeholder="Enter your announcement request..."></textarea>
                <button type="submit">Submit Request</button>
            </form>
            <div id="announcementRequestResult" style="margin-top:10px;color:#388e3c;"></div>
        </div>
    </div>

    <!-- Complaint Form (hidden until user chooses) -->
    <h1 id="complaintTitle" style="display:none;">Submit a Complaint</h1>
    <form id="complaintForm" style="display:none;">
        <div class="form-group" id="nameEmailFields">
            <label for="complaintName">Full Name:</label>
            <input type="text" id="complaintName" name="complaintName" required placeholder="Enter your full name">
        </div>
        <div class="form-group" id="emailFields">
            <label for="complaintEmail">Email:</label>
            <input type="email" id="complaintEmail" name="complaintEmail" required placeholder="Enter your email address">
        </div>
        <div class="form-group">
            <label for="complaintType">Complaint Type:</label>
            <select id="complaintType" name="complaintType" required>
                <option value="">Select Complaint Type</option>
                <option value="academic">Academic</option>
                <option value="infrastructure">Infrastructure</option>
                <option value="faculty">Faculty</option>
                <option value="hostel">Hostel</option>
                <option value="transportation">Transportation</option>
                <option value="canteen">Canteen</option>
                <option value="library">Library</option>
                <option value="sports">Sports</option>
                <option value="other">Other</option>
            </select>
        </div>
        <div class="form-group">
            <label for="complaintDescription">Description:</label>
            <textarea id="complaintDescription" name="complaintDescription" rows="4" required placeholder="Describe your complaint"></textarea>
        </div>
        <div class="form-group">
            <label for="requiredResolution">What resolution do you require?</label>
            <textarea id="requiredResolution" name="requiredResolution" rows="3" required placeholder="Specify expected action"></textarea>
        </div>
        <div class="form-actions">
            <button type="button" id="cancelComplaintBtn" class="btn-secondary">Cancel</button>
            <button type="submit" class="btn-primary">Submit Complaint</button>
        </div>
    </form>

    <!-- Token Display Section -->
    <div id="tokenSection" style="display:none;">
        <h2>Your Complaint Token</h2>
        <p id="tokenDisplay"></p>
        <p>Save this token to check your complaint status in the future.</p>
    </div>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-storage-compat.js"></script>
    <!-- Your main JS -->
    <script src="script.js"></script>
</body>
</html> 